## MVP

- Комнаты: 1:1 (интервьюер ↔ кандидат), ссылка-приглашение с токеном.
- Медиа: камера/микрофон, выбор устройств, демонстрация экрана кандидата.
- Запись: MVP — клиентская (MediaRecorder, чанки → загрузка в хранилище); позже — серверная через SFU (egress).
- Прокторинг (без AI): focus/blur, visibilitychange, devicechange, mute/unmute, stop screen-share, paste/copy, resize, reconnect; водяные знаки.
- Таймлайн и отчёт: событийный журнал + маркеры записи, HTML-отчёт + экспорт в PDF.
- Роли/доступ: candidate, interviewer (по токен-ссылкам), приватные комнаты.
- Хранение: объектное (S3-совместимое) для записей, Postgres для событий/метаданных.

## Стек технологий

- Frontend: Next.js 14 (App Router), TypeScript, Tailwind CSS, Zustand (или Context), shadcn/ui.
- Realtime: LiveKit (self-hosted SFU, Docker), STUN/TURN — coturn.
- Backend: Node.js (NestJS + Fastify), WebSocket (сигналинг/события), JWT.
- База данных: PostgreSQL (+ TimescaleDB опционально для тайм-серий), ORM — Prisma.
- Хранилище: MinIO (S3-совместимое) для записей и артефактов.
- Отчёты: HTML + PDF (Puppeteer); экспорт raw JSON событий.
- Инфраструктура: Docker Compose (dev/prod), Nginx (TLS/реверс-прокси).

## Архитектура (высокоуровнево)

- Web-приложение (Next.js): UI комнат, плеер записей, таймлайн событий, отчёты.
- API (NestJS): аутентификация/роли, создание комнат/приглашений, приём событий прокторинга, генерация отчётов, выдача временных токенов в SFU.
- Realtime: LiveKit (SFU) для медиа; coturn — STUN/TURN (fallback по NAT);
- Записи: MVP — client-side запись и загрузка; этап 2 — egress (серверная запись) в S3/MinIO.
- Хранилище: Postgres (rooms, participants, events, recordings), MinIO (файлы записей и PDF).
- Безопасность: JWT с ограничением по комнате/роли, short-lived токены, CORS/CSRF, аудит действий.

### Последовательность (упрощённо)

1. Интервьюер создаёт комнату → получает ссылку-приглашение (room token) для кандидата.
2. Оба заходят по HTTPS → запрашивают медиа (камера/микрофон) → подключаются к SFU.
3. Кандидат включает демонстрацию экрана (getDisplayMedia); события прокторинга отправляются на API в реальном времени.
4. Запись: в MVP — локальная запись потока(ов) и загрузка чанков → MinIO.
5. По завершении: формируется HTML-отчёт + PDF с таймкодами и событиями; доступен плеер записей.

## Модель данных (минимум)

- rooms(id, created_by, started_at, ended_at)
- participants(id, room_id, role: candidate|interviewer, display_name)
- invites(id, room_id, role, token, expires_at, used_at)
- proctor_events(id, room_id, participant_id, type, payload JSONB, occurred_at)
- recordings(id, room_id, participant_id NULL, kind: camera|screen|mixed, url, size, duration, created_at)

## API (черновик)

- POST /api/rooms — создать комнату
- POST /api/rooms/:id/invites — создать токен-приглашение (роль)
- GET /api/rooms/:id/token — выдать short-lived медиатокен (для SFU)
- POST /api/proctor/events — приём событий (batch или по одному)
- POST /api/recordings/init|chunk|complete — загрузка записи чанками
- GET /api/reports/:roomId/html — HTML-отчёт
- GET /api/reports/:roomId/pdf — PDF-отчёт

## Флоу пользователя

- Интервьюер: авторизация → создать комнату → отправить ссылку → вести интервью → завершить → открыть отчёт/записи.
- Кандидат: перейти по ссылке → дать доступ к камере/микрофону/экрану → пройти интервью.

## Развёртывание

- Dev: Docker Compose (livekit, coturn, postgres, minio); Next.js и API локально или тоже в compose; self-signed TLS или mkcert.
- Prod: VPS/облако, домен, Let’s Encrypt (Nginx), Docker Compose для всех сервисов; резервное копирование БД и MinIO.

## Роадмап (вехи)

- R1 (нед. 1–4): комнаты 1:1, базовый UI, client-side запись, сбор событий прокторинга, Postgres/MinIO, HTML-отчёт.
- R2 (нед. 5–8): PDF, улучшенный таймлайн/плеер, роли/аудит, загрузка чанками с возобновлением, водяные знаки.
- R3 (нед. 9–12): панельные интервью (3–4 участника), egress (серверная запись), политики прокторинга и риск-скор.
- R4 (нед. 13–16): кросс-браузер/нагрузочные тесты, алерты в реальном времени, подготовка к защите.

## Риски и тестирование

- NAT/сеть: настроенный TURN (coturn), fallback стратегии.
- Браузеры: различия getDisplayMedia/MediaRecorder → кросс-тесты (Chrome/Firefox/Edge/Safari).
- Производительность: лимиты на размер записей, chunk upload + ретраи.
- Юзабилити/правила: понятные уведомления, прозрачный таймлайн и реплеи.

## Матрицы сравнения (отечественные ВКС с ИИ)

Методика:

- Обозначения: ✓ — есть; △ — частично/доступно в платных/через модуль; — — нет/нет публичных данных.
- Платформы: Контур.Толк | Яндекс Телемост | МТС Линк | SaluteJazz (Сбер) | TrueConf | DION | IVA MCU | 1F Teams.

### 1) Транскрибация и ASR

| Платформа         | Реал‑тайм ASR | Диаризация спикеров | Таймкоды | Экспорт (TXT/Docx/PDF) |
| ----------------- | ------------- | ------------------- | -------- | ---------------------- |
| Контур.Толк       | △             | △                   | △        | ✓                      |
| Яндекс Телемост   | —             | —                   | —        | ✓                      |
| МТС Линк          | △             | △                   | △        | ✓                      |
| SaluteJazz (Сбер) | △             | △                   | △        | ✓                      |
| TrueConf          | △             | △                   | △        | ✓                      |
| DION              | △             | △                   | △        | ✓                      |
| IVA MCU           | ✓             | ✓                   | ✓        | ✓                      |
| 1F Teams          | △             | ✓                   | ✓        | ✓                      |

Примечание: точные режимы (онлайн/офлайн) и качество ASR зависят от конфигурации/модулей и должны уточняться по документации.

### 2) Саммари/протоколы

| Платформа         | Авто‑саммари | Протокол встречи | Настраиваемые промпты | Хайлайты/главные моменты |
| ----------------- | ------------ | ---------------- | --------------------- | ------------------------ |
| Контур.Толк       | ✓            | ✓                | △                     | △                        |
| Яндекс Телемост   | ✓            | ✓                | —                     | —                        |
| МТС Линк          | ✓            | △                | —                     | ✓                        |
| SaluteJazz (Сбер) | ✓            | △                | —                     | △                        |
| TrueConf          | △            | ✓ (AI Server)    | —                     | △                        |
| DION              | ✓            | ✓                | —                     | △                        |
| IVA MCU           | △            | △                | —                     | —                        |
| 1F Teams          | ✓            | ✓                | ✓                     | ✓                        |

### 3) Ассистенты и контекст

| Платформа         | Поиск по чатам/встречам | Q&A по документам | Подсказки интервьюеру (real‑time) | Контекст по истории/CRM |
| ----------------- | ----------------------- | ----------------- | --------------------------------- | ----------------------- |
| Контур.Толк       | —                       | —                 | —                                 | —                       |
| Яндекс Телемост   | —                       | —                 | —                                 | ✓ (экосистема 360)      |
| МТС Линк          | ✓                       | —                 | —                                 | △                       |
| SaluteJazz (Сбер) | △                       | —                 | —                                 | △                       |
| TrueConf          | —                       | —                 | —                                 | △ (интеграции on‑prem)  |
| DION              | —                       | —                 | —                                 | —                       |
| IVA MCU           | —                       | —                 | —                                 | —                       |
| 1F Teams          | △                       | ✓                 | —                                 | △                       |

Комментарий: «подсказки интервьюеру в реальном времени» как отдельная функция у конкурентов практически не встречается — это потенциал нашей дифференциации.

### 4) Видео/аудио улучшения

| Платформа         | Шумоподавление | Бьютификация | Фоны/замена | Автофокус/зум | Распозн. маркерной доски |
| ----------------- | -------------- | ------------ | ----------- | ------------- | ------------------------ |
| Контур.Толк       | ✓              | ✓            | ✓           | △             | —                        |
| Яндекс Телемост   | △              | △            | △           | △             | —                        |
| МТС Линк          | ✓              | ✓            | ✓           | ✓             | —                        |
| SaluteJazz (Сбер) | ✓              | ✓            | ✓           | △             | —                        |
| TrueConf          | ✓              | △            | ✓           | ✓             | ✓                        |
| DION              | ✓              | △            | ✓           | △             | —                        |
| IVA MCU           | ✓              | △            | ✓           | △             | —                        |
| 1F Teams          | △              | △            | △           | △             | —                        |

### 5) Перевод и мультиязычность

| Платформа         | Онлайн‑перевод RU/EN |
| ----------------- | -------------------- |
| Контур.Толк       | —                    |
| Яндекс Телемост   | △                    |
| МТС Линк          | △                    |
| SaluteJazz (Сбер) | △                    |
| TrueConf          | △                    |
| DION              | △                    |
| IVA MCU           | ✓                    |
| 1F Teams          | △                    |

### 6) Антифейк и прокторинг

| Платформа         | Детектор дипфейков | Прокторинг/античит (браузерные сигналы) |
| ----------------- | ------------------ | --------------------------------------- |
| Контур.Толк       | ✓ (отдельно)       | —                                       |
| Яндекс Телемост   | —                  | —                                       |
| МТС Линк          | —                  | —                                       |
| SaluteJazz (Сбер) | —                  | —                                       |
| TrueConf          | —                  | —                                       |
| DION              | —                  | —                                       |
| IVA MCU           | —                  | —                                       |
| 1F Teams          | —                  | —                                       |

### 7) Развёртывание и безопасность

| Платформа         | SaaS | On‑prem/коробка  | Корп. интеграции (почта/календарь) |
| ----------------- | ---- | ---------------- | ---------------------------------- |
| Контур.Толк       | ✓    | △                | △                                  |
| Яндекс Телемост   | ✓    | —                | ✓                                  |
| МТС Линк          | ✓    | △                | △                                  |
| SaluteJazz (Сбер) | ✓    | ✓ (через модули) | △                                  |
| TrueConf          | ✓    | ✓                | △                                  |
| DION              | ✓    | △                | —                                  |
| IVA MCU           | △    | ✓                | △                                  |
| 1F Teams          | △    | ✓ (коробка)      | △                                  |

### 8) Тарифная доступность ИИ

| Платформа         | Free‑tier ИИ | Стартовая цена платного ИИ (ориентир) |
| ----------------- | ------------ | ------------------------------------- |
| Контур.Толк       | △            | от 10 990 ₽/год                       |
| Яндекс Телемост   | —            | от 239 ₽/мес/сотр. (360)              |
| МТС Линк          | ✓            | от 15 600 ₽/год/польз.                |
| SaluteJazz (Сбер) | ✓            | 8 000 ₽/год (лицензия)                |
| TrueConf          | △            | модуль AI Server — отдельно           |
| DION              | △            | от 750 ₽/год/лицензия                 |
| IVA MCU           | —            | по конфигурации                       |
| 1F Teams          | —            | 269 800 ₽ (коробка Essentials)        |

Итог: уникальная ниша — «онлайновые подсказки интервьюеру» с привязкой к JD/резюме и выявлением пробелов в ответах. Это сочетает высокий спрос и низкую представленность у конкурентов.
